-- Script para criar tabelas de Dashboard no Oracle
-- POCWeb Dashboard API

-- 1. Tabela de Configuracao de Dashboards
CREATE TABLE POCWEB_DASH_CONFIG (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MODULO_ID NUMBER NOT NULL,
    MODULO_NOME VARCHAR2(100),
    DASHBOARD_KEY VARCHAR2(50) NOT NULL,
    ATIVO NUMBER(1) DEFAULT 1,
    CONSTRAINT UK_DASH_CONFIG UNIQUE (MODULO_ID, DASHBOARD_KEY)
);

-- 2. Tabela de Dados - Matrizes Pesadas
CREATE TABLE POCWEB_DASH_MATRIZES (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMPRESA_ID NUMBER DEFAULT 226,
    DATA_CARGA DATE DEFAULT SYSDATE,
    NRO_LOTE NUMBER NOT NULL,
    LINHAGEM_FEMEA VARCHAR2(50),
    IDADE NUMBER,
    SALDO_FEMEA NUMBER,
    VIABILIDADE_STANDARD NUMBER(6,2),
    VIABILIDADE_REAL NUMBER(6,2),
    RACAO_FEMEA_STANDARD NUMBER(10,2),
    RACAO_FEMEA NUMBER(10,2),
    POSTURA_PADRAO NUMBER(6,2),
    POSTURA_OBTIDA NUMBER(6,2),
    OVO_AVE_ACUM_STANDARD NUMBER(10,2),
    OVO_AVE_ACUM NUMBER(10,2),
    APROV_OVO_PADRAO_GRANJA NUMBER(6,2),
    APROVEITAMENTO_GRANJA NUMBER(6,2),
    APROVEITAMENTO_INCUBATORIO NUMBER(6,2),
    ECLOSAO_PADRAO NUMBER(6,2),
    ECLOSAO_REAL NUMBER(6,2),
    PINTO_AVE_ACUM_PADRAO NUMBER(10,2),
    PINTO_AVE_ACUM NUMBER(10,2)
);

CREATE INDEX IX_POCWEB_DASH_MAT_EMP ON POCWEB_DASH_MATRIZES(EMPRESA_ID);
CREATE INDEX IX_POCWEB_DASH_MAT_LOTE ON POCWEB_DASH_MATRIZES(NRO_LOTE);

-- 3. Registro de configuracao do dashboard de Matrizes Pesadas (Modulo 1)
INSERT INTO POCWEB_DASH_CONFIG (MODULO_ID, MODULO_NOME, DASHBOARD_KEY)
VALUES (1, 'Matrizes Pesadas', 'matrizes_pesadas');

-- 4. Carga dos dados do Excel (10 registros)
INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (100, 'COBB', 46, 36824, 96.09, 94.82, 157, 167.3, 71, 66.33, 107.4, 108, 97, 97, 99.08, 86.7, 84, 78.4, 73.06);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (101, 'ROSS', 38, 102075, 97.15, 95.17, 167, 171.59, 81, 78.65, 72.2, 71, 97.8, 98, 99.22, 90.44, 88, 43.8, 42.05);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (102, 'HUBBARD', 30, 65446, 98.7, 98.53, 172, 173.45, 84.82, 83.48, 22.3, 26, 96.13, 97, 99.04, 78, 65, 0.9, 0.88);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (103, 'COBB', 29, 23715, 98.98, 77.96, 164, 162.9, 83, 74.51, 16.4, 12, 97.2, 95, 99.12, 0, 0, 0, 0);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (104, 'COBB', 25, 27697, 99.66, 99.49, 122, 121.63, 5, 1.46, 0.3, 0, 65, 96, 0, 0, 0, 0, 0);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (105, 'ROSS', 64, 81335, 92.21, 91.30, 155, 164.73, 49.9, 48.95, 184.8, 194, 95.8, 96, 99.11, 75.97, 62, 141.8, 139.94);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (106, 'HUBBARD', 62, 64439, 92.3, 93.56, 154, 166.23, 55.11, 59.66, 172.7, 176, 96.12, 97, 99.07, 74.89, 56, 130.7, 119.35);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (107, 'ROSS', 58, 62595, 93.35, 90.31, 158, 165.98, 57.1, 60.20, 163.7, 161, 96.3, 96, 98.87, 80.67, 73, 125.3, 113.60);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (108, 'COBB', 53, 63445, 94.9, 92.65, 155, 168.06, 64, 62.45, 138.3, 138, 97, 97, 98.63, 83.71, 79, 105.1, 98.38);

INSERT INTO POCWEB_DASH_MATRIZES (NRO_LOTE, LINHAGEM_FEMEA, IDADE, SALDO_FEMEA,
    VIABILIDADE_STANDARD, VIABILIDADE_REAL, RACAO_FEMEA_STANDARD, RACAO_FEMEA,
    POSTURA_PADRAO, POSTURA_OBTIDA, OVO_AVE_ACUM_STANDARD, OVO_AVE_ACUM,
    APROV_OVO_PADRAO_GRANJA, APROVEITAMENTO_GRANJA, APROVEITAMENTO_INCUBATORIO,
    ECLOSAO_PADRAO, ECLOSAO_REAL, PINTO_AVE_ACUM_PADRAO, PINTO_AVE_ACUM)
VALUES (109, 'COBB', 28, 29854, 99.15, 98.15, 164, 157.67, 74, 68.79, 10.7, 11, 95, 94, 98.60, 0, 0, 0, 0);

COMMIT;

-- Verificar dados
SELECT 'POCWEB_DASH_CONFIG' AS TABELA, COUNT(*) AS REGISTROS FROM POCWEB_DASH_CONFIG
UNION ALL
SELECT 'POCWEB_DASH_MATRIZES', COUNT(*) FROM POCWEB_DASH_MATRIZES;
